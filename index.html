<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>DCG Duel Widget</title>
    <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: rgba(0, 0, 0, 0.0);
            color: #000;
            font-family: 'Kosugi Maru', 'Arial', sans-serif;
            font-size: 18px;
            user-select: none;
            -webkit-app-region: drag;
        }
        .close-area {
            width: 100%;
            display: flex;
            justify-content: flex-end;
            margin-bottom: 2px;
            -webkit-app-region: no-drag;
        }
        .close-btn {
            background: #fff;
            color: #222;
            border: 2px solid #222;
            border-radius: 50%;
            font-family: 'Kosugi Maru', 'Arial', sans-serif;
            font-size: 18px;
            font-weight: bold;
            width: 32px;
            height: 32px;
            line-height: 26px;
            text-align: center;
            cursor: pointer;
            box-shadow: 1px 1px 0 #222;
            margin-right: 2px;
            margin-top: 2px;
            transition: background 0.1s;
        }
        .close-btn:hover {
            background: #eee;
        }
        .main-table {
            background: #fff;
            border: 2px solid #222;
            border-radius: 4px;
            box-shadow: 2px 2px 0 #222;
            padding: 0;
            min-width: 150px;
            display: inline-block;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #222;
            padding: 2px 6px;
            text-align: center;
            font-family: 'Kosugi Maru', 'Arial', sans-serif;
            font-size: 24px;
            vertical-align: middle;
        }
        th {
            background: #fff;
            font-weight: bold;
        }
        .label {
            font-size: 22px;
            font-weight: bold;
            width: 90px;
        }
        .value {
            font-size: 26px;
            font-weight: bold;
            padding-left: 18px !important;
            padding-right: 18px !important;
            min-width: 50px;
        }
        .rate {
            font-size: 22px;
            padding: 0 6px 0 6px !important;
            min-width: 48px;
            vertical-align: middle;
            display: table-cell;
        }
        .btn-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            margin-top: 12px;
            -webkit-app-region: no-drag;
        }
        .btn-row {
            display: flex;
            flex-direction: row;
            gap: 6px;
            justify-content: center;
        }
        .btn {
            background: #fff;
            color: #222;
            border: 2px solid #222;
            border-radius: 4px;
            font-family: 'Kosugi Maru', 'Arial', sans-serif;
            font-size: 14px;
            font-weight: bold;
            padding: 2px 8px;
            cursor: pointer;
            box-shadow: 1px 1px 0 #222;
            transition: background 0.1s;
            min-width: 60px;
            max-width: 90px;
            white-space: nowrap;
        }
        .btn-small {
            font-size: 12px;
            padding: 2px 6px;
            min-width: 54px;
            max-width: 80px;
        }
        .btn:hover {
            background: #eee;
        }
    </style>
</head>
<body>
    <div class="close-area">
        <button class="close-btn" onclick="window.close()">×</button>
    </div>
    <div class="main-table">
        <table>
            <tr>
                <th class="label">試合数</th>
                <td class="value" id="matchCount" colspan="2">0</td>
            </tr>
            <tr>
                <th class="label">コイン</th>
                <td class="value" id="coinSuccess">0</td>
                <td class="rate" id="successRate">0%</td>
            </tr>
            <tr>
                <th class="label">勝利数</th>
                <td class="value" id="winCount">0</td>
                <td class="rate" id="winRate">0%</td>
            </tr>
        </table>
    </div>
    <div class="btn-area">
        <div class="btn-row">
            <button class="btn btn-small" onclick="addCoinSuccess()">コイン成功</button>
            <button class="btn btn-small" onclick="addCoinFail()">コイン失敗</button>
            <button class="btn btn-small" onclick="resetAll()">リセット</button>
        </div>
        <div class="btn-row">
            <button class="btn" onclick="addWin()">勝利</button>
            <button class="btn" onclick="addLose()">敗北</button>
        </div>
    </div>
    <script>
        let wins = 0;
        let losses = 0;
        let coinSuccesses = 0;
        let coinFails = 0;

        function updateDisplay() {
            const totalMatches = wins + losses;
            const totalCoins = coinSuccesses + coinFails;
            document.getElementById('matchCount').textContent = totalMatches;
            document.getElementById('coinSuccess').textContent = coinSuccesses;
            document.getElementById('successRate').textContent = (totalCoins > 0 ? Math.round((coinSuccesses / totalCoins) * 100) : 0) + '%';
            document.getElementById('winCount').textContent = wins;
            document.getElementById('winRate').textContent = (totalMatches > 0 ? Math.round((wins / totalMatches) * 100) : 0) + '%';
        }
        function addWin() { wins++; updateDisplay(); }
        function addLose() { losses++; updateDisplay(); }
        function addCoinSuccess() { coinSuccesses++; updateDisplay(); }
        function addCoinFail() { coinFails++; updateDisplay(); }
        function resetAll() { wins=0; losses=0; coinSuccesses=0; coinFails=0; updateDisplay(); }
        // キーボードショートカットも有効
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'w': case 'W': addWin(); break;
                case 'l': case 'L': addLose(); break;
                case 's': case 'S': addCoinSuccess(); break;
                case 'f': case 'F': addCoinFail(); break;
                case 'r': case 'R': resetAll(); break;
            }
        });
        updateDisplay();
    </script>
</body>
</html> 